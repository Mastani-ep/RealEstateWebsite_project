{% extends 'estatesite/base.html' %}
{% load static %}
{% load custom_tags %}
{%block content%}
<div class="row cards">
<div class="col" style="margin-left: 10%">
<div class="card_property" style="width: 50rem;">
  <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img class="d-block w-100" src="{{property.photo.url}}" alt="Main photo">
    </div>
      {% if property.photo_1 %}
    <div class="carousel-item">
      <img class="d-block w-100" src="{{property.photo_1.url}}" alt="First photo">
    </div>
      {% endif %}

      {% if property.photo_2 %}
    <div class="carousel-item">
      <img class="d-block w-100" src="{{property.photo_2.url}}" alt="Second photo">
    </div>
      {% endif %}

      {% if property.photo_3 %}
    <div class="carousel-item">
      <img class="d-block w-100" src="{{property.photo_3.url}}" alt="Third photo">
    </div>
      {% endif %}

      {% if property.photo_4 %}
    <div class="carousel-item">
      <img class="d-block w-100" src="{{property.photo_4.url}}" alt="Fourth photo">
    </div>
      {% endif %}

      {% if property.photo_5 %}
    <div class="carousel-item">
      <img class="d-block w-100" src="{{property.photo_5.url}}" alt="Fifth photo">
    </div>
      {% endif %}

      {% if property.photo_6 %}
    <div class="carousel-item">
      <img class="d-block w-100" src="{{property.photo_6.url}}" alt="Sixth photo">
    </div>
      {% endif %}
  </div>
 <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
    <div class="card-img-overlay">
      <div class="row">
      <div class="col-7 property_title">
        <h2>{{property.title}}</h2>
        <h5>{{property.address}}</h5>
      </div>
      <div class="col property_price">
        <h2>{{property.price}} z≈Ç</h2>
      </div>
    </div>
    </div>
    </div>
  <div class="card-body" style="margin-top: 100px">
    <div class="row" style="justify-content: center">

      <ul>
        <li>
          <i class="fa-solid fa-table-cells-large"> </i>
        </li>
        <li>
          <i class="fa-solid fa-bed"></i>
        </li>
      </ul>


      <ul class="property_text">
        <li>
          <b>Size:</b>
        </li>
        <li>
          <b>Bedrooms:</b>
        </li>
      </ul>

      <ul>
        <li>
          {{property.size}} m<sup>2</sup>
        </li>
        <li>
          {{property.rooms}}
        </li>
      </ul>

        <ul>
          <li>
            <i class="fa-solid fa-bath"></i>
          </li>
          <li>
            <i class="fa-solid fa-warehouse"></i>
          </li>
        </ul>

      <ul class="property_text">
        <li>
          <b>Bathrooms:</b>
        </li>
        <li>
          <b>Garages:</b>
        </li>
      </ul>


      <ul>
        <li>
          {{property.bathrooms}}
        </li>
        <li>
          {{property.garage}}
        </li>
      </ul>


    </div>
    <hr/>
    <div class="prop_desc">
      {{property.description}}
    </div>
  </div>
</div>
</div>
  <div class="col" style="margin-right: 10%; margin-left: 5%">
   {% if property.agent %}
    <div class="card_agent">
      <img class="card-img-top agent" src="{{property.agent.photo.url}}" alt="Agent photo">
      <div class="card-body contact_agent">
        <div class="row">
            <div class="col">
            <ul>
              <li>
                <i class="fa-solid fa-user" style="color: #995080;">&nbsp;&nbsp;&nbsp;</i>
                {{property.agent.user.first_name}} {{property.agent.user.last_name}}
              </li>
              <li>
                <i class="fa-solid fa-phone"> &nbsp;&nbsp; </i>
                {{property.agent.phone}}
              </li>
              <li class="property_text">
              <i class="fa-solid fa-envelope"></i>
                <button type="button" class="btn property_text" data-toggle="modal" id="contactAgent_{{prop.id}}" data-target="#mymodalcontactagent-anon">Contact the agent</button>
              </li>
              <div class="modal fade" id="mymodalcontactagent-anon" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                                 <div class="modal-dialog modal-dialog-centered"  role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title">Contact the agent</h5>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                            </div>
                                        <form method="POST" class="form-group" action="{% url 'contact' property.agent.user.id property.id %}">
                                            <div class="modal-body">
                                                    {% csrf_token %}
                                                    {{form}}
                                            </div>
                                            <div class="modal-footer">
                                                <button type="submit" class="btn contact-modal">Send message</button>
                                                <button type="button" class="btn cancel" data-dismiss="modal">Cancel</button>
                                            </div>
                                            </form>
                                    </div>
                                </div>
                            </div>
            </ul>
        </div>
      </div>
    </div>
  </div>
  {% endif %}
</div>
</div>

{% endblock %}